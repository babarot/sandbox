name: unlock
on:
  issue_comment:
    types: [created, updated]

jobs:
  pr_commented:
    # This job only runs for pull request comments
    name: PR comment
    if: ${{ github.event.issue.pull_request }}
    runs-on: ubuntu-latest
    steps:
    - run: |
        echo A comment on PR $NUMBER
      env:
        NUMBER: ${{ github.event.issue.number }}
    - name: Run
      uses: actions/github-script@v6
      with:
        github-token: ${{ secrets.GITHUB_TOKEN }}
        script: |
          const { data: comments } = await github.rest.issues.listComments({
            owner: context.repo.owner,
            repo: context.repo.repo,
            issue_number: context.issue.number,
          })
          const comment = comments.find(comment => {
            return comment.body.includes('/unlock')
          })
          console.log(comment)
          github.rest.issues.createComment({
            issue_number: context.issue.number,
            owner: context.repo.owner,
            repo: context.repo.repo,
            body: comment,
          })
